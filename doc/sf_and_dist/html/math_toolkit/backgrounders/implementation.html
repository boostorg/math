<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Additional Implementation Notes</title>
<link rel="stylesheet" href="../../../../../../../doc/html/boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets Vsnapshot_2006-12-17_0120">
<link rel="start" href="../../index.html" title="Math Toolkit">
<link rel="up" href="../backgrounders.html" title="Backgrounders">
<link rel="prev" href="../backgrounders.html" title="Backgrounders">
<link rel="next" href="relative_error.html" title="Relative Error">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr>
<td valign="top"><img alt="Boost C++ Libraries" width="277" height="86" src="../../../../../../../boost.png"></td>
<td align="center"><a href="../../../../../../../index.htm">Home</a></td>
<td align="center"><a href="../../../../../../../libs/libraries.htm">Libraries</a></td>
<td align="center"><a href="../../../../../../../people/people.htm">People</a></td>
<td align="center"><a href="../../../../../../../more/faq.htm">FAQ</a></td>
<td align="center"><a href="../../../../../../../more/index.htm">More</a></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="../backgrounders.html"><img src="../../../../../../../doc/html/images/prev.png" alt="Prev"></a><a accesskey="u" href="../backgrounders.html"><img src="../../../../../../../doc/html/images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../../../../../../doc/html/images/home.png" alt="Home"></a><a accesskey="n" href="relative_error.html"><img src="../../../../../../../doc/html/images/next.png" alt="Next"></a>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h3 class="title">
<a name="math_toolkit.backgrounders.implementation"></a><a href="implementation.html" title="Additional Implementation Notes"> Additional
      Implementation Notes</a>
</h3></div></div></div>
<p>
        The majority of the implementation notes are included with the documentation
        of each function or distribution. The notes here are of a more general nature,
        and reflect more the general implementation philosophy used.
      </p>
<a name="math_toolkit.backgrounders.implementation.implemention_philosophy"></a><h5>
<a name="id782879"></a>
        <a href="implementation.html#math_toolkit.backgrounders.implementation.implemention_philosophy">Implemention
        philosophy</a>
      </h5>
<p>
        "First be right, then be fast."
      </p>
<p>
        There will always be potential compromises to be made between speed and accuracy.
        It may be possible to find faster methods, particularly for certain limited
        ranges of arguments, but for most applications of math functions and distributions,
        we judge that speed is rarely as important as accuracy.
      </p>
<p>
        So our priority is accuracy.
      </p>
<p>
        To permit evaluation of accuracy of the special functions, production of
        extremely accurate tables of test values has received considerable effort.
      </p>
<p>
        (It also required much CPU effort - there was some danger of molten plastic
        dripping from the bottom of JM's laptop, so instead, PAB's Dual-core desktop
        was kept 50% busy for <span class="bold"><strong>days</strong></span> calculating some
        tables of test values!)
      </p>
<p>
        For a specific RealType, say float or double, it may be possible to find
        approximations for some functions that are simpler and thus faster, but less
        accurate (perhaps because there are no refining iterations, for example,
        when calculating inverse functions).
      </p>
<p>
        If these prove accurate enough to be "fit for his purpose", then
        a user may substitute his custom specialization.
      </p>
<p>
        For example, there are approximations dating back from times when computation
        was a <span class="bold"><strong>lot</strong></span> more expensive:
      </p>
<p>
        H Goldberg and H Levine, Approximate formulas for percentage points and normalisation
        of t and chi squared, Ann. Math. Stat., 17(4), 216 - 225 (Dec 1946).
      </p>
<p>
        A H Carter, Approximations to percentage points of the z-distribution, Biometrika
        34(2), 352 - 358 (Dec 1947).
      </p>
<p>
        These could still provide sufficient accuracy for some speed-critical applications.
      </p>
<a name="math_toolkit.backgrounders.implementation.accuracy_and_representation_of_test_values"></a><h5>
<a name="id782990"></a>
        <a href="implementation.html#math_toolkit.backgrounders.implementation.accuracy_and_representation_of_test_values">Accuracy
        and Representation of Test Values</a>
      </h5>
<p>
        In order to be accurate enough for as many as possible real types, constant
        values are given to 50 decimal digits if available (though many sources proved
        only accurate near to 64-bit double precision). Values are specified as long
        double types by appending L, unless they are exactly representable, for example
        integers, or binary fractions like 0.125. This avoids the risk of loss of
        accuracy converting from double, the default type. Values are used after
        static_cast&lt;RealType&gt;(1.2345L) to provide the appropriate RealType
        for spot tests.
      </p>
<p>
        Functions that return constants values, like kurtosis for example, are written
        as
      </p>
<p>
        <code class="computeroutput"><span class="keyword">static_cast</span><span class="special">&lt;</span><span class="identifier">RealType</span><span class="special">&gt;(-</span><span class="number">3</span><span class="special">)</span> <span class="special">/</span>
        <span class="number">5</span><span class="special">;</span></code>
      </p>
<p>
        to provide the most accurate value that the compiler can compute for the
        real type. (The denominator is an integer and so will be promoted exactly).
      </p>
<p>
        So tests for one third, <span class="bold"><strong>not</strong></span> exactly representable
        with radix two floating-point, (should) use, for example:
      </p>
<p>
        <code class="computeroutput"><span class="keyword">static_cast</span><span class="special">&lt;</span><span class="identifier">RealType</span><span class="special">&gt;(</span><span class="number">1</span><span class="special">)</span> <span class="special">/</span>
        <span class="number">3</span><span class="special">;</span></code>
      </p>
<p>
        If a function is very sensitive to changes in input, specifying an inexact
        value as input (such as 0.1) can throw the result off by a noticeable amount:
        0.1f is "wrong" by ~1e-7 for example (because 0.1 has no exact
        binary representation). That is why exact binary values - halves, quarters,
        and eighths etc - are used in test code along with the occasional fraction
        <code class="computeroutput"><span class="identifier">a</span><span class="special">/</span><span class="identifier">b</span></code> with <code class="computeroutput"><span class="identifier">b</span></code>
        a power of two (in order to ensure that the result is an exactly representable
        binary value).
      </p>
<a name="math_toolkit.backgrounders.implementation.tolerance_of_tests"></a><h5>
<a name="id783222"></a>
        <a href="implementation.html#math_toolkit.backgrounders.implementation.tolerance_of_tests">Tolerance
        of Tests</a>
      </h5>
<p>
        The tolerances need to be set to the maximum of:
      </p>
<div class="itemizedlist"><ul type="disc">
<li>
          Some epsilon value.
        </li>
<li>
          The accuracy of the data (often only near 64-bit double).
        </li>
</ul></div>
<p>
        Otherwise when long double has more digits than the test data, then no amount
        of tweaking an epsilon based tolerance will work.
      </p>
<p>
        A common problem is when tolerances that are suitable for implementations
        like Microsoft VS.NET where double and long double are the same size: tests
        fail on other systems where long double is more accurate than double. Check
        first that the suffix L is present, and then that the tolerance is big enough.
      </p>
<a name="math_toolkit.backgrounders.implementation.handling_unsuitable_arguments"></a><h5>
<a name="id783282"></a>
        <a href="implementation.html#math_toolkit.backgrounders.implementation.handling_unsuitable_arguments">Handling
        Unsuitable Arguments</a>
      </h5>
<p>
        In <a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2004/n1665.pdf" target="_top">Errors
        in Mathematical Special Functions</a>, J. Marraffino &amp; M. Paterno
        it is proposed that signalling a domain error is mandatory when the argument
        would give an mathematically undefined result.
      </p>
<div class="itemizedlist"><ul type="disc"><li>
          Guideline 1
        </li></ul></div>
<div class="blockquote"><blockquote class="blockquote">
<p>
          </p>
<p>
            A mathematical function is said to be defined at a point a = (a1, a2,
            . . .) if the limits as x = (x1, x2, . . .) 'approaches a from all directions
            agree'. The defined value may be any number, or +infinity, or -infinity.
          </p>
<p>
        </p>
</blockquote></div>
<p>
        Put crudely, if the function goes to + infinity and then emerges 'round-the-back'
        with - infinity, it is NOT defined.
      </p>
<div class="blockquote"><blockquote class="blockquote">
<p>
          </p>
<p>
            The library function which approximates a mathematical function shall
            signal a domain error whenever evaluated with argument values for which
            the mathematical function is undefined.
          </p>
<p>
        </p>
</blockquote></div>
<div class="itemizedlist"><ul type="disc"><li>
          Guideline 2
        </li></ul></div>
<div class="blockquote"><blockquote class="blockquote">
<p>
          </p>
<p>
            The library function which approximates a mathematical function shall
            signal a domain error whenever evaluated with argument values for which
            the mathematical function obtains a non-real value.
          </p>
<p>
        </p>
</blockquote></div>
<p>
        This implementation is believed to follow these proposals and to assist compatibility
        with <span class="emphasis"><em>ISO/IEC 9899:1999 Programming languages - C</em></span> and
        with the <a href="../../www.open-std.org/jtc1/sc22/wg21/docs/papers/2005/n1836.pdf" target="_top">Draft
        Technical Report on C++ Library Extensions, 2005-06-24, section 5.2.1, paragraph
        5</a>. <a href="../main_overview/error_handling.html" title="Error Handling">See
        also domain_error</a>.
      </p>
<p>
        See <a href="../policy/pol_ref.html" title="Policy Reference">policy reference</a> for
        details of the error handling policies that should allow a user to comply
        with any of these recommendations, as well as other behaviour.
      </p>
<p>
        See <a href="../main_overview/error_handling.html" title="Error Handling">error handling</a>
        for a detailed explanation of the mechanism, and <a href="../dist/stat_tut/weg/error_eg.html" title="Error Handling Example">error_handling
        example</a> and <a href="../../../../../example/error_handling_example.cpp" target="_top">error_handling_example.cpp</a>
      </p>
<div class="caution"><table border="0" summary="Caution">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Caution]" src="../../../../../../../doc/html/images/caution.png"></td>
<th align="left">Caution</th>
</tr>
<tr><td align="left" valign="top"><p>
          If you enable throw but do NOT have try &amp; catch block, then the program
          will terminate with an uncaught exception and probably abort. Therefore
          to get the benefit of helpful error messages, enabling <span class="bold"><strong>all</strong></span>
          exceptions <span class="bold"><strong>and</strong></span> using try&amp;catch is
          recommended for all applications. However, for simplicity, this is not
          done for most examples.
        </p></td></tr>
</table></div>
<a name="math_toolkit.backgrounders.implementation.handling_of_functions_that_are_not_mathematically_defined"></a><h5>
<a name="id783506"></a>
        <a href="implementation.html#math_toolkit.backgrounders.implementation.handling_of_functions_that_are_not_mathematically_defined">Handling
        of Functions that are Not Mathematically defined</a>
      </h5>
<p>
        Functions that are not mathematically defined, like the Cauchy mean, fail
        to compile by default. <a href="../policy/pol_ref/assert_undefined.html" title="Mathematically Undefined Function Policies">A
        policy</a> allows control of this.
      </p>
<p>
        If the policy is to permit undefined functions, then calling them throws
        a domain error, by default. But the error policy can be set to not throw,
        and to return NaN instead. For example,
      </p>
<p>
        <code class="computeroutput"><span class="preprocessor">#define</span> <span class="identifier">BOOST_MATH_DOMAIN_ERROR_POLICY</span>
        <span class="identifier">ignore_error</span></code>
      </p>
<p>
        appears before the first Boost include, then if the un-implemented function
        is called, mean(cauchy&lt;&gt;()) will return std::numeric_limits&lt;T&gt;::quiet_NaN().
      </p>
<div class="warning"><table border="0" summary="Warning">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="../../../../../../../doc/html/images/warning.png"></td>
<th align="left">Warning</th>
</tr>
<tr><td align="left" valign="top"><p>
          If <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">numeric_limits</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">&gt;::</span><span class="identifier">has_quiet_NaN</span></code> is false (for example T
          is a User-defined type), then an exception will always be thrown when a
          domain error occurs. Catching exceptions is therefore strongly recommended.
        </p></td></tr>
</table></div>
<a name="math_toolkit.backgrounders.implementation.median_of_distributions"></a><h5>
<a name="id783647"></a>
        <a href="implementation.html#math_toolkit.backgrounders.implementation.median_of_distributions">Median
        of distributions</a>
      </h5>
<p>
        There are many distributions for which we have been unable to find an analytic
        formula, and this has deterred us from implementing <a href="http://en.wikipedia.org/wiki/Median" target="_top">median
        functions</a>, the mid-point in a list of values.
      </p>
<p>
        However a useful median approximation for distribution <code class="computeroutput"><span class="identifier">dist</span></code>
        may be available from
      </p>
<p>
        <code class="computeroutput"><span class="identifier">quantile</span><span class="special">(</span><span class="identifier">dist</span><span class="special">,</span> <span class="number">0.5</span><span class="special">)</span></code>.
      </p>
<p>
        <a href="http://www.amstat.org/publications/jse/v13n2/vonhippel.html" target="_top">Mean,
        Median, and Skew, Paul T von Hippel</a>
      </p>
<p>
        <a href="http://documents.wolfram.co.jp/teachersedition/MathematicaBook/24.5.html" target="_top">Descriptive
        Statistics,</a>
      </p>
<p>
        <a href="http://documents.wolfram.co.jp/v5/Add-onsLinks/StandardPackages/Statistics/DescriptiveStatistics.html" target="_top">and
        </a>
      </p>
<p>
        <a href="http://documents.wolfram.com/v5/TheMathematicaBook/AdvancedMathematicsInMathematica/NumericalOperationsOnData/3.8.1.html" target="_top">Mathematica
        Basic Statistics.</a> give more detail, in particular for discrete distributions.
      </p>
<a name="math_toolkit.backgrounders.implementation.handling_of_floating_point_infinity"></a><h5>
<a name="id783792"></a>
        <a href="implementation.html#math_toolkit.backgrounders.implementation.handling_of_floating_point_infinity">Handling
        of Floating-Point Infinity</a>
      </h5>
<p>
        Some functions and distributions are well defined with + or - infinity as
        argument(s), but after some experiments with handling infinite arguments
        as special cases, we concluded that it was generally more useful to forbid
        this, and instead to return the result of <a href="../main_overview/error_handling.html#domain_error">domain_error</a>.
      </p>
<p>
        Handling infinity as special cases is additionally complicated because, unlike
        built-in types on most - but not all - platforms, not all User-Defined Types
        are specialized to provide <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">numeric_limits</span><span class="special">&lt;</span><span class="identifier">RealType</span><span class="special">&gt;::</span><span class="identifier">infinity</span><span class="special">()</span></code> and would return zero rather than any representation
        of infinity.
      </p>
<p>
        The rationale is that non-finiteness may happen because of error or overflow
        in the users code, and it will be more helpful for this to be diagnosed promptly
        rather than just continuing. The code also became much more complicated,
        more error-prone, much more work to test, and much less readable.
      </p>
<p>
        However in a few cases, for example normal, where we felt it obvious, we
        have permitted argument(s) to be infinity, provided infinity is implemented
        for the realType on that implementation.
      </p>
<p>
        Overflow, underflow, denorm can be handled using <a href="../policy/pol_ref/error_handling_policies.html" title="Error Handling Policies">error
        handling policies</a>.
      </p>
<p>
        We have also tried to catch boundary cases where the mathematical specification
        would result in divide by zero or overflow and signalling these similarly.
        What happens at (and near), poles can be controlled through <a href="../policy/pol_ref/error_handling_policies.html" title="Error Handling Policies">error
        handling policies</a>.
      </p>
<a name="math_toolkit.backgrounders.implementation.scale__shape_and_location"></a><h5>
<a name="id783940"></a>
        <a href="implementation.html#math_toolkit.backgrounders.implementation.scale__shape_and_location">Scale,
        Shape and Location</a>
      </h5>
<p>
        We considered adding location and scale to the list of functions, for example:
      </p>
<pre class="programlisting">
<span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">RealType</span><span class="special">&gt;</span>
<span class="keyword">inline</span> <span class="identifier">RealType</span> <span class="identifier">scale</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">triangular_distribution</span><span class="special">&lt;</span><span class="identifier">RealType</span><span class="special">&gt;&amp;</span> <span class="identifier">dist</span><span class="special">)</span>
<span class="special">{</span>
  <span class="identifier">RealType</span> <span class="identifier">lower</span> <span class="special">=</span> <span class="identifier">dist</span><span class="special">.</span><span class="identifier">lower</span><span class="special">();</span>
  <span class="identifier">RealType</span> <span class="identifier">mode</span> <span class="special">=</span> <span class="identifier">dist</span><span class="special">.</span><span class="identifier">mode</span><span class="special">();</span>
  <span class="identifier">RealType</span> <span class="identifier">upper</span> <span class="special">=</span> <span class="identifier">dist</span><span class="special">.</span><span class="identifier">upper</span><span class="special">();</span>
  <span class="identifier">RealType</span> <span class="identifier">result</span><span class="special">;</span>  <span class="comment">// of checks.
</span>  <span class="keyword">if</span><span class="special">(</span><span class="keyword">false</span> <span class="special">==</span> <span class="identifier">detail</span><span class="special">::</span><span class="identifier">check_triangular</span><span class="special">(</span><span class="identifier">BOOST_CURRENT_FUNCTION</span><span class="special">,</span> <span class="identifier">lower</span><span class="special">,</span> <span class="identifier">mode</span><span class="special">,</span> <span class="identifier">upper</span><span class="special">,</span> <span class="special">&amp;</span><span class="identifier">result</span><span class="special">))</span>
  <span class="special">{</span>
    <span class="keyword">return</span> <span class="identifier">result</span><span class="special">;</span>
  <span class="special">}</span>
  <span class="keyword">return</span> <span class="special">(</span><span class="identifier">upper</span> <span class="special">-</span> <span class="identifier">lower</span><span class="special">);</span>
<span class="special">}</span>
</pre>
<p>
        but found that these concepts are not defined (or their definition too contentious)
        for too many distributions to be generally applicable. Because they are non-member
        functions, they can be added if required.
      </p>
<a name="math_toolkit.backgrounders.implementation.notes_on_implementation_of_specific_functions__amp__distributions"></a><h5>
<a name="id784406"></a>
        <a href="implementation.html#math_toolkit.backgrounders.implementation.notes_on_implementation_of_specific_functions__amp__distributions">Notes
        on Implementation of Specific Functions &amp; Distributions</a>
      </h5>
<div class="itemizedlist"><ul type="disc"><li>
          Default parameters for the Triangular Distribution. We are uncertain about
          the best default parameters. Some sources suggest that the Standard Triangular
          Distribution has lower = 0, mode = half and upper = 1. However as a approximation
          for the normal distribution, the most common usage, lower = -1, mode =
          0 and upper = 1 would be more suitable.
        </li></ul></div>
<a name="math_toolkit.backgrounders.implementation.rational_approximations_used"></a><h5>
<a name="id784447"></a>
        <a href="implementation.html#math_toolkit.backgrounders.implementation.rational_approximations_used">Rational
        Approximations Used</a>
      </h5>
<p>
        Some of the special functions in this library are implemented via rational
        approximations. These are either taken from the literature, or devised by
        John Maddock using <a href="../toolkit/internals2/minimax.html" title="Minimax Approximations and the Remez Algorithm">our
        Remez code</a>.
      </p>
<p>
        Rational rather than Polynomial approximations are used to ensure accuracy:
        polynomial approximations are often wonderful up to a certain level of accuracy,
        but then quite often fail to provide much greater accuracy no matter how
        many more terms are added.
      </p>
<p>
        Our own approximations were devised either for added accuracy (to support
        128-bit long doubles for example), or because literature methods were unavailable
        or under non-BSL compatible license. Our Remez code is known to produce good
        agreement with literature results in fairly simple "toy" cases.
        All approximations were checked for convergence and to ensure that they were
        not ill-conditioned (the coefficients can give a theoretically good solution,
        but the resulting rational function may be un-computable at fixed precision).
      </p>
<p>
        Recomputing using different Remez implementations may well produce differing
        coefficients: the problem is well known to be ill conditioned in general,
        and our Remez implementation often found a broad and ill-defined minima for
        many of these approximations (of course for simple "toy" examples
        like approximating <code class="computeroutput"><span class="identifier">exp</span></code> the
        minima is well defined, and the coeffiecents should agree no matter whose
        Remez implementation is used). This should not in general effect the validity
        of the approximations: there's good literature supporting the idea that coefficients
        can be "in error" without necessarily adversely effecting the result.
        Note that "in error" has a special meaning in this context, see
        <a href="http://front.math.ucdavis.edu/0101.5042" target="_top">"Approximate construction
        of rational approximations and the effect of error autocorrection.",
        Grigori Litvinov, eprint arXiv:math/0101042</a>. Therefore the coefficients
        still need to be accurately calculated, even if they can be in error compared
        to the "true" minimax solution.
      </p>
<a name="math_toolkit.backgrounders.implementation.representation_of_mathematical_constants"></a><h5>
<a name="id784563"></a>
        <a href="implementation.html#math_toolkit.backgrounders.implementation.representation_of_mathematical_constants">Representation
        of Mathematical Constants</a>
      </h5>
<p>
        A macro BOOST_DEFINE_MATH_CONSTANT in constants.hpp is used to provide high
        accuracy constants to mathematical functions and distributions, since it
        is important to provide values uniformly for both built-in float, double
        and long double types, and for User Defined types like NTL::quad_float and
        NTL::RR.
      </p>
<p>
        To permit calculations in this Math ToolKit and its tests, (and elsewhere)
        at about 100 decimal digits with NTL::RR type, it is obviously necessary
        to define constants to this accuracy.
      </p>
<p>
        However, some compilers do not accept decimal digits strings as long as this.
        So the constant is split into two parts, with the 1st containing at least
        long double precision, and the 2nd zero if not needed or known. The 3rd part
        permits an exponent to be provided if necessary (use zero if none) - the
        other two parameters may only contain decimal digits (and sign and decimal
        point), and may NOT include an exponent like 1.234E99 (nor a trailing F or
        L). The second digit string is only used if T is a User-Defined Type, when
        the constant is converted to a long string literal and lexical_casted to
        type T. (This is necessary because you can't use a numeric constant since
        even a long double might not have enough digits).
      </p>
<p>
        For example, pi is defined:
      </p>
<pre class="programlisting">
<span class="identifier">BOOST_DEFINE_MATH_CONSTANT</span><span class="special">(</span><span class="identifier">pi</span><span class="special">,</span>
  <span class="number">3.141592653589793238462643383279502884197169399375105820974944</span><span class="special">,</span>
  <span class="number">5923078164062862089986280348253421170679821480865132823066470938446095505</span><span class="special">,</span>
  <span class="number">0</span><span class="special">)</span>                                              
</pre>
<p>
        And used thus:
      </p>
<pre class="programlisting">
<span class="keyword">using</span> <span class="keyword">namespace</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">math</span><span class="special">::</span><span class="identifier">constants</span><span class="special">;</span>

<span class="keyword">double</span> <span class="identifier">diameter</span> <span class="special">=</span> <span class="number">1.</span><span class="special">;</span>
<span class="keyword">double</span> <span class="identifier">radius</span> <span class="special">=</span> <span class="identifier">diameter</span> <span class="special">*</span> <span class="identifier">pi</span><span class="special">&lt;</span><span class="keyword">double</span><span class="special">&gt;();</span>

<span class="keyword">or</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">math</span><span class="special">::</span><span class="identifier">constants</span><span class="special">::</span><span class="identifier">pi</span><span class="special">&lt;</span><span class="identifier">NTL</span><span class="special">::</span><span class="identifier">RR</span><span class="special">&gt;()</span>
</pre>
<p>
        Note that it is necessary (if inconvenient) to specify the type explicitly.
      </p>
<p>
        So you cannot write
      </p>
<pre class="programlisting">
<span class="keyword">double</span> <span class="identifier">p</span> <span class="special">=</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">math</span><span class="special">::</span><span class="identifier">constants</span><span class="special">::</span><span class="identifier">pi</span><span class="special">&lt;&gt;();</span>  <span class="comment">// could not deduce template argument for 'T'  
</span></pre>
<p>
        Neither can you write:
      </p>
<pre class="programlisting">
<span class="keyword">double</span> <span class="identifier">p</span> <span class="special">=</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">math</span><span class="special">::</span><span class="identifier">constants</span><span class="special">::</span><span class="identifier">pi</span><span class="special">;</span> <span class="comment">// Context does not allow for disambiguation of overloaded function     
</span><span class="keyword">double</span> <span class="identifier">p</span> <span class="special">=</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">math</span><span class="special">::</span><span class="identifier">constants</span><span class="special">::</span><span class="identifier">pi</span><span class="special">();</span> <span class="comment">// Context does not allow for disambiguation of overloaded function     
</span></pre>
<a name="math_toolkit.backgrounders.implementation.thread_safety"></a><h5>
<a name="id785109"></a>
        <a href="implementation.html#math_toolkit.backgrounders.implementation.thread_safety">Thread
        safety</a>
      </h5>
<p>
        Reporting of error by setting errno should be thread safe already (otherwise
        none of the std lib math functions would be thread safe?). If you turn on
        reporting of errors via exceptions, errno gets left unused anyway.
      </p>
<p>
        Other than that, the code is intended to be thread safe <span class="bold"><strong>for
        built in real-number types</strong></span> : so float, double and long double
        are all thread safe.
      </p>
<p>
        For non-built-in types - NTL::RR for example - initialisation of the various
        constants used in the implementation is potentially <span class="bold"><strong>not</strong></span>
        thread safe. This most undesiable, but it would be a signficant challenge
        to fix it. Some compilers may offer the option of having static-constants
        initialised in a thread safe manner (Commeau, and maybe others?), if that's
        the case then the problem is solved. This is a topic of hot debate for the
        next C++ std revision, so hopefully all compilers will be required to do
        the right thing here at some point.
      </p>
<a name="math_toolkit.backgrounders.implementation.sources_of_test_data"></a><h5>
<a name="id785174"></a>
        <a href="implementation.html#math_toolkit.backgrounders.implementation.sources_of_test_data">Sources
        of Test Data</a>
      </h5>
<p>
        We found a large number of sources of test data. We have assumed that these
        are <span class="emphasis"><em>"known good"</em></span> if they agree with the results
        from our test and only consulted other sources for their <span class="emphasis"><em>'vote'</em></span>
        in the case of serious disagreement. The accuracy, actual and claimed, vary
        very widely. Only <a href="http://functions.wolfram.com/" target="_top">Wolfram Mathematica
        functions</a> provided a higher accuracy than C++ double (64-bit floating-point)
        and was regarded as the most-trusted source by far.
      </p>
<p>
        A useful index of sources is: <a href="http://www.sal.hut.fi/Teaching/Resources/ProbStat/table.html" target="_top">Web-oriented
        Teaching Resources in Probability and Statistics</a>
      </p>
<p>
        <a href="http://espse.ed.psu.edu/edpsych/faculty/rhale/hale/507Mat/statlets/free/pdist.htm" target="_top">Statlet</a>:
        Is a Javascript application that calculates and plots probability distributions,
        and provides the most complete range of distributions:
      </p>
<div class="blockquote"><blockquote class="blockquote">
<p>
          </p>
<p>
            Bernoulli, Binomial, discrete uniform, geometric, hypergeometric, negative
            binomial, Poisson, beta, Cauchy-Lorentz, chi-sequared, Erlang, exponential,
            extreme value, Fisher, gamma, Laplace, logistic, lognormal, normal, Parteo,
            Student's t, triangular, uniform, and Weibull.
          </p>
<p>
        </p>
</blockquote></div>
<p>
        It calculates pdf, cdf, survivor, log survivor, hazard, tail areas, &amp;
        critical values for 5 tail values.
      </p>
<p>
        It is also the only independent source found for the Weibull distribution;
        unfortunately it appears to suffer from very poor accuracy in areas where
        the underlying special function is known to be difficult to implement.
      </p>
<a name="math_toolkit.backgrounders.implementation.creating_and_managing_the_equations"></a><h5>
<a name="id785284"></a>
        <a href="implementation.html#math_toolkit.backgrounders.implementation.creating_and_managing_the_equations">Creating
        and Managing the Equations</a>
      </h5>
<p>
        The primary source for the equations is now <a href="http://www.w3.org/Math/" target="_top">MathML</a>:
        see the *.mml files in libs/math/doc/equations/.
      </p>
<p>
        These are most easily edited by a GUI editor such as <a href="http://mathcast.sourceforge.net/home.html" target="_top">Mathcast</a>,
        please note that the equation editor supplied with Open Office currently
        mangles these files and should not currently be used.
      </p>
<p>
        Convertion to SVG was achieved using <a href="http://www.grigoriev.ru/svgmath/" target="_top">SVGMath</a>
        and a command line such as:
      </p>
<pre class="programlisting">$for file in *.mml; do 
&gt;/cygdrive/c/Python25/python.exe 'C:\download\open\SVGMath-0.3.1\math2svg.py' \
&gt;&gt;$file &gt; $(basename $file .mml).svg
&gt;done
</pre>
<p>
        Note that SVGMath requires that the mml files are <span class="bold"><strong>not</strong></span>
        wrapped in an XHTML XML wrapper - this is added by Mathcast by default -
        one workaround is to copy an existing mml file and then edit it with Mathcast:
        the existing format should then be preserved. This is a bug in the XML parser
        used by SVGMath which the author is aware of.
      </p>
<p>
        If neccessary the XHTML wrapper can be removed with:
      </p>
<pre class="programlisting">cat filename | tr -d "\r\n" | sed -e 's/.*\(&lt;math[^&gt;]*&gt;.*&lt;/math&gt;\).*/\1/' &gt; newfile</pre>
<p>
        Setting up fonts for SVGMath is currently rather tricky, on a windows system
        JM's font setup looks like this:
      </p>
<pre class="programlisting">&lt;!-- MathML-to-SVG configuration file --&gt;
&lt;config verbose<code class="literal">"true"&gt;
    &lt;!-- Fallback font family --&gt;
    &lt;fallback family</code>"Lucida Sans Unicode"/&gt;
    
    &lt;!-- Default values for MathML properties. --&gt;
    &lt;!-- Most of these are defined in the MathML Rec - change with care --&gt;
    &lt;defaults displaystyle<code class="literal">"false"
              mathsize</code>"12pt"
              scriptminsize<code class="literal">"8pt"
              scriptsizemultiplier</code>"0.71"
              veryverythinmathspace<code class="literal">"0.0555556em"
              verythinmathspace</code>"0.111111em"
              thinmathspace<code class="literal">"0.166667em"
              mediummathspace</code>"0.222222em"
              thickmathspace<code class="literal">"0.277778em"
              verythickmathspace</code>"0.333333em"
              veryverythickmathspace<code class="literal">"0.388889em"
              rowspacing</code>"1.0ex"
              columnspacing<code class="literal">"0.8em"
              framespacing</code>"0.4em 0.5ex"/&gt;

    &lt;!-- Additional styling for individual operators --&gt;
    &lt;!-- Make differentials italic --&gt;
    &lt;operator-style operator<code class="literal">"&amp;#x2145;" fontstyle</code>"italic"/&gt;
    &lt;operator-style operator<code class="literal">"&amp;#x2146;" fontstyle</code>"italic"/&gt;
    
    &lt;!-- Font families --&gt;
    &lt;family name<code class="literal">"Times New Roman"&gt;
         &lt;font ttf</code>"C:\WINDOWS\Fonts\times.ttf"/&gt;
         &lt;font weight<code class="literal">"bold" ttf</code>"C:\WINDOWS\Fonts\timesbd.ttf"/&gt;
         &lt;font style<code class="literal">"italic" ttf</code>"C:\WINDOWS\Fonts\timesi.ttf"/&gt;
         &lt;font weight<code class="literal">"bold" style</code>"italic" ttf<code class="literal">"C:\WINDOWS\Fonts\timesbi.ttf"\/&gt;        
    &lt;\/family&gt;

    &lt;family name</code>"Arial"&gt;
         &lt;font ttf<code class="literal">"C:\WINDOWS\Fonts\arial.ttf"\/&gt;
         &lt;font weight</code>"bold" ttf<code class="literal">"C:\WINDOWS\Fonts\arialbd.ttf"\/&gt;
         &lt;font style</code>"italic" ttf<code class="literal">"C:\WINDOWS\Fonts\ariali.ttf"\/&gt;
         &lt;font weight</code>"bold" style<code class="literal">"italic" ttf</code>"C:\WINDOWS\Fonts\arialbi.ttf"/&gt;        
    &lt;/family&gt;

    &lt;family name<code class="literal">"Courier New"&gt;
         &lt;font ttf</code>"C:\WINDOWS\Fonts\cour.ttf"/&gt;
         &lt;font weight<code class="literal">"bold" ttf</code>"C:\WINDOWS\Fonts\courbd.ttf"/&gt;
         &lt;font style<code class="literal">"italic" ttf</code>"C:\WINDOWS\Fonts\couri.ttf"/&gt;
         &lt;font weight<code class="literal">"bold" style</code>"italic" ttf<code class="literal">"C:\WINDOWS\Fonts\courbi.ttf"\/&gt;        
    &lt;\/family&gt;

    &lt;family name</code>"Euclid Fraktur"&gt;
         &lt;font ttf<code class="literal">"C:\WINDOWS\Fonts\eufrak.ttf"\/&gt;
         &lt;font weight</code>"bold" ttf<code class="literal">"C:\WINDOWS\Fonts\eufrakb.ttf"\/&gt;
    &lt;\/family&gt;

    &lt;family name</code>"Monotype Corsiva"&gt;
         &lt;font ttf<code class="literal">"C:\WINDOWS\Fonts\mtcorsva.ttf"\/&gt;
    &lt;\/family&gt;

    &lt;family name</code>"Lucida Sans Unicode"&gt;
         &lt;font ttf<code class="literal">"C:\WINDOWS\Fonts\lsansuni.ttf"\/&gt;
    &lt;\/family&gt;

    &lt;!-- Math variant definitions --&gt;
    &lt;!-- Serif --&gt;
    &lt;mathvariant name</code>"normal"
                 family<code class="literal">"Times New Roman, Lucida Sans Unicode"\/&gt;                 
    &lt;mathvariant name</code>"bold"
                 family<code class="literal">"Times New Roman, Lucida Sans Unicode" weight</code>"bold"/&gt;
    &lt;mathvariant name<code class="literal">"italic"
                 family</code>"Times New Roman, Lucida Sans Unicode" style<code class="literal">"italic"\/&gt;
    &lt;mathvariant name</code>"bold-italic"
                 family<code class="literal">"Times New Roman, Lucida Sans Unicode" weight</code>"bold" style<code class="literal">"italic"\/&gt;

    &lt;!-- Sans-Serif --&gt;
    &lt;mathvariant name</code>"sans-serif"
                 family<code class="literal">"Arial, Lucida Sans Unicode"\/&gt;                 
    &lt;mathvariant name</code>"bold-sans-serif"
                 family<code class="literal">"Arial, Lucida Sans Unicode" weight</code>"bold"/&gt;
    &lt;mathvariant name<code class="literal">"sans-serif-italic"
                 family</code>"Arial, Lucida Sans Unicode" style<code class="literal">"italic"\/&gt;
    &lt;mathvariant name</code>"sans-serif-bold-italic"
                 family<code class="literal">"Arial, Lucida Sans Unicode" weight</code>"bold" style<code class="literal">"italic"\/&gt;

    &lt;!-- Fraktur --&gt;
    &lt;mathvariant name</code>"fraktur" 
                 family<code class="literal">"Euclid Fraktur, Lucida Sans Unicode"\/&gt;
    &lt;mathvariant name</code>"bold-fraktur" 
                 family<code class="literal">"Euclid Fraktur, Lucida Sans Unicode" weight</code>"bold"/&gt;

    &lt;!-- Script --&gt;
    &lt;mathvariant name<code class="literal">"script" 
                 family</code>"Monotype Corsiva, Lucida Sans Unicode"/&gt;
    &lt;mathvariant name<code class="literal">"bold-script" 
                 family</code>"Monotype Corsiva, Lucida Sans Unicode" weight<code class="literal">"bold"\/&gt;

    &lt;!-- Monospace --&gt;
    &lt;mathvariant name</code>"monospace" family<code class="literal">"Courier New, Lucida Sans Unicode"\/&gt;

    &lt;!-- Double-struck --&gt;
    &lt;mathvariant name</code>"double-struck" family="Lucida Sans Unicode"/&gt;
&lt;/config&gt;
</pre>
<p>
        Note that unlike the sample config file supplied with SVGMath this does not
        make use of the Mathematica 7 font as this lacks sufficient Unicode information
        for it to be used with either SVGMath or XEP "as is".
      </p>
<p>
        Also note that the SVG files in the repository are almost certainly Windows-specific
        since they reference various Windows Fonts.
      </p>
<p>
        PNG files can be created from the SVG's using <a href="http://xmlgraphics.apache.org/batik/tools/rasterizer.html" target="_top">Batik</a>
        and a command such as:
      </p>
<pre class="programlisting">java -jar 'C:\download\open\batik-1.7\batik-rasterizer.jar' -dpi 120 *.svg</pre>
<p>
        The PDF is generated using:
      </p>
<pre class="programlisting">$bjam -a pdf xsl:param<code class="literal">admon.graphics.extension</code>".svg" \
&gt;xsl:param=use.role.for.mediaobject=1 xsl:param=preferred.mediaobject.role=print</pre>
<p>
        Note that XEP will have to be configured to <span class="bold"><strong>use and
        embed</strong></span> whatever fonts are used by the SVG equations. JM's XEP config
        file looks like:
      </p>
<pre class="programlisting">&lt;?xml version<code class="literal">"1.0" encoding</code>"UTF-8"?&gt;
&lt;config&gt;

  &lt;!-- <code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code>= --&gt;
  &lt;!-- Formatter options                                       --&gt;
  &lt;!-- <code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code>= --&gt;
  &lt;options&gt;
    &lt;option name<code class="literal">"LICENSE" value</code>"license.xml"/&gt;
    &lt;option name<code class="literal">"TMPDIR" value</code>"none"/&gt;
    &lt;option name<code class="literal">"BROKENIMAGE" value</code>"images/404.gif"/&gt;
    &lt;option name<code class="literal">"LOGO" value</code>"images/logo-renderx.svg"/&gt;
    
    &lt;!-- Backend options --&gt;
    &lt;generator-options format<code class="literal">"PDF"&gt;
      &lt;!-- &lt;option name</code>"COMPRESS" value<code class="literal">"false"\/&gt; --&gt;
      &lt;!-- &lt;option name</code>"PDF_VERSION" value<code class="literal">"1.3"\/&gt; --&gt;
    &lt;\/generator-options&gt;
      
    &lt;generator-options format</code>"PostScript"&gt;
      &lt;!-- &lt;option name<code class="literal">"LANGUAGE_LEVEL" value</code>"2"/&gt; --&gt;
      &lt;!-- &lt;option name<code class="literal">"CLONE_EPS" value</code>"true"/&gt; --&gt;
    &lt;/generator-options&gt;

    &lt;generator-options format<code class="literal">"AFP"&gt;
      &lt;option name</code>"AFPCodepageTxt" value<code class="literal">"Cp500"\/&gt;
      &lt;option name</code>"AFPCodepage" value<code class="literal">"T1V10500"\/&gt;
      &lt;option name</code>"AFPLogLevel" value<code class="literal">"0"\/&gt;
      &lt;option name</code>"USE_PTOCA_LEVEL" value<code class="literal">"3"\/&gt;
      &lt;option name</code>"USE_BCOCA_LEVEL" value<code class="literal">"1"\/&gt;
      &lt;option name</code>"USE_GOCA_LEVEL" value<code class="literal">"1"\/&gt;
      &lt;option name</code>"RESOLUTION" value<code class="literal">"1440"\/&gt;
      &lt;!-- &lt;option name</code>"AFPGrayImage" value<code class="literal">"yes"\/&gt; --&gt;
      &lt;option name</code>"USE_SHADING_PATTERNS" value<code class="literal">"yes"\/&gt; 
      &lt;option name</code>"USE_REPLICATE_AND_TRIM" value<code class="literal">"yes"\/&gt; 
      &lt;option name</code>"SHADING_PATTERN_RESOLUTION" value<code class="literal">"0.25"\/&gt;
      &lt;option name</code>"TRY_USING_TIFF_COMPRESSION" value<code class="literal">"yes"\/&gt; 
      &lt;option name</code>"AFPFont,Helvetica" value<code class="literal">"C0H200.0, C0H300.0, C0H400.0, C0H500.0, C0H201.0, C0H301.0, C0H401.0, C0H501.0, 278"\/&gt;
      &lt;option name</code>"AFPFont,Times" value<code class="literal">"C0N200.0, C0N300.0, C0N400.0, C0N500.0, C0N201.0, C0N301.0, C0N401.0, C0N501.0, 250"\/&gt;
      &lt;option name</code>"AFPFont,Courier" value<code class="literal">"C04200.0, C04300.0, C04400.0, C04500.0, C04201.0, C04301.0, C04401.0, C04501.0, 600"\/&gt;
      &lt;option name</code>"AFPFont,Arial" value<code class="literal">"C0H200.0, C0H300.0, C0H400.0, C0H500.0, C0H201.0, C0H301.0, C0H401.0, C0H501.0, 278"\/&gt;
      &lt;option name</code>"AFPFont,Times New Roman" value<code class="literal">"C0N200.0, C0N300.0, C0N400.0, C0N500.0, C0N201.0, C0N301.0, C0N401.0, C0N501.0, 250"\/&gt;
      &lt;option name</code>"AFPFont,Verdana" value<code class="literal">"C0VE0.0,  C0VEI.0,  C0VEB.0,  C0VEZ.0,  C0H201.0, C0H301.0, C0H401.0, C0H501.0,278"\/&gt;
      &lt;option name</code>"AFPFont,Interstate" value<code class="literal">"C0IS0.0, C0ISB.0, C0IS0.0, C0ISB.0, C0H201.0, C0H301.0, C0H401.0, C0H501.0, 278"\/&gt;
    &lt;\/generator-options&gt;
  &lt;\/options&gt;

  &lt;!-- =</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">= --&gt;
  &lt;!-- Fonts                                                   --&gt;
  &lt;!-- =</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">= --&gt;
  
  &lt;fonts xml:base</code>"fonts/" default-family<code class="literal">"Helvetica"&gt;
    
    &lt;!-- Base Adobe fonts. --&gt;
    &lt;font-group label</code>"Base 14" embed<code class="literal">"false"&gt;
      &lt;font-family name</code>"Courier"&gt;
        &lt;font&gt;&lt;font-data afm<code class="literal">"Courier.afm"\/&gt;&lt;\/font&gt;
        &lt;font style</code>"oblique"&gt;&lt;font-data afm<code class="literal">"Courier-Oblique.afm"\/&gt;&lt;\/font&gt;
        &lt;font weight</code>"bold"&gt;&lt;font-data afm<code class="literal">"Courier-Bold.afm"\/&gt;&lt;\/font&gt;
        &lt;font weight</code>"bold" style<code class="literal">"oblique"&gt;&lt;font-data afm</code>"Courier-BoldOblique.afm"/&gt;&lt;/font&gt;
      &lt;/font-family&gt;

      &lt;font-family name<code class="literal">"Helvetica"&gt;
        &lt;font&gt;&lt;font-data afm</code>"Helvetica.afm"/&gt;&lt;/font&gt;
        &lt;font style<code class="literal">"oblique"&gt;&lt;font-data afm</code>"Helvetica-Oblique.afm"/&gt;&lt;/font&gt;
        &lt;font weight<code class="literal">"bold"&gt;&lt;font-data afm</code>"Helvetica-Bold.afm"/&gt;&lt;/font&gt;
        &lt;font weight<code class="literal">"bold" style</code>"oblique"&gt;&lt;font-data afm<code class="literal">"Helvetica-BoldOblique.afm"\/&gt;&lt;\/font&gt;
      &lt;\/font-family&gt;

      &lt;font-family name</code>"Times" ligatures<code class="literal">"&#64257; &#64258;"&gt;
        &lt;font&gt;&lt;font-data afm</code>"Times-Roman.afm"/&gt;&lt;/font&gt;
        &lt;font style<code class="literal">"italic"&gt;&lt;font-data afm</code>"Times-Italic.afm"/&gt;&lt;/font&gt;
        &lt;font weight<code class="literal">"bold"&gt;&lt;font-data afm</code>"Times-Bold.afm"/&gt;&lt;/font&gt;
        &lt;font weight<code class="literal">"bold" style</code>"italic"&gt;&lt;font-data afm<code class="literal">"Times-BoldItalic.afm"\/&gt;&lt;\/font&gt;
      &lt;\/font-family&gt;

      &lt;font-family name</code>"Symbol"&gt;
        &lt;font&gt;&lt;font-data afm<code class="literal">"Symbol.afm"\/&gt;&lt;\/font&gt;
      &lt;\/font-family&gt;

      &lt;font-family name</code>"ZapfDingbats"&gt; 
        &lt;font&gt;&lt;font-data afm<code class="literal">"ZapfDingbats.afm"\/&gt;&lt;\/font&gt;
      &lt;\/font-family&gt;
    &lt;\/font-group&gt;

    &lt;!-- Other Type1 fonts --&gt;
    &lt;font-group label</code>"Assorted Type 1" embed<code class="literal">"true"&gt;
      &lt;font-family name</code>"OmegaSerifIPA"&gt;
        &lt;font&gt;&lt;font-data afm<code class="literal">"IPA.afm" pfa</code>"IPA.pfa" glyph-list<code class="literal">"IPA.glyphs"\/&gt;&lt;\/font&gt;
      &lt;\/font-family&gt;   
      &lt;font-alias name</code>"OmegaIPA" value<code class="literal">"OmegaSerifIPA"\/&gt;
      &lt;font-alias name</code>"Phonetic" value<code class="literal">"OmegaSerifIPA"\/&gt;
    &lt;\/font-group&gt;

    &lt;!-- Sample configuration for Windows TrueType fonts.  --&gt;

    &lt;font-group xml:base</code>"file:/C:/Windows/Fonts/" label<code class="literal">"Windows TrueType" embed</code>"true" subset<code class="literal">"true"&gt; 
      &lt;font-family name</code>"Arial"&gt;
        &lt;font&gt;&lt;font-data ttf<code class="literal">"arial.ttf"\/&gt;&lt;\/font&gt;
        &lt;font style</code>"oblique"&gt;&lt;font-data ttf<code class="literal">"ariali.ttf"\/&gt;&lt;\/font&gt;
        &lt;font weight</code>"bold"&gt;&lt;font-data ttf<code class="literal">"arialbd.ttf"\/&gt;&lt;\/font&gt;
        &lt;font weight</code>"bold" style<code class="literal">"oblique"&gt;&lt;font-data ttf</code>"arialbi.ttf"/&gt;&lt;/font&gt;
      &lt;/font-family&gt;

      &lt;font-family name<code class="literal">"Times New Roman" ligatures</code>"&amp;#xFB01; &amp;#xFB02;"&gt;
        &lt;font&gt;&lt;font-data ttf<code class="literal">"times.ttf"\/&gt;&lt;\/font&gt;
        &lt;font style</code>"italic"&gt;&lt;font-data ttf<code class="literal">"timesi.ttf"\/&gt;&lt;\/font&gt;
        &lt;font weight</code>"bold"&gt;&lt;font-data ttf<code class="literal">"timesbd.ttf"\/&gt;&lt;\/font&gt;
        &lt;font weight</code>"bold" style<code class="literal">"italic"&gt;&lt;font-data ttf</code>"timesbi.ttf"/&gt;&lt;/font&gt;
      &lt;/font-family&gt;

      &lt;font-family name<code class="literal">"Courier New"&gt;
        &lt;font&gt;&lt;font-data ttf</code>"cour.ttf"/&gt;&lt;/font&gt;
        &lt;font style<code class="literal">"oblique"&gt;&lt;font-data ttf</code>"couri.ttf"/&gt;&lt;/font&gt;
        &lt;font weight<code class="literal">"bold"&gt;&lt;font-data ttf</code>"courbd.ttf"/&gt;&lt;/font&gt;
        &lt;font weight<code class="literal">"bold" style</code>"oblique"&gt;&lt;font-data ttf<code class="literal">"courbi.ttf"\/&gt;&lt;\/font&gt;
      &lt;\/font-family&gt;

      &lt;font-family name</code>"Tahoma" embed<code class="literal">"true"&gt;
        &lt;font&gt;&lt;font-data ttf</code>"tahoma.ttf"/&gt;&lt;/font&gt;
        &lt;font weight<code class="literal">"bold"&gt;&lt;font-data ttf</code>"tahomabd.ttf"/&gt;&lt;/font&gt;
      &lt;/font-family&gt;

      &lt;font-family name<code class="literal">"Verdana" embed</code>"true"&gt;
        &lt;font&gt;&lt;font-data ttf<code class="literal">"verdana.ttf"\/&gt;&lt;\/font&gt;
        &lt;font style</code>"oblique"&gt;&lt;font-data ttf<code class="literal">"verdanai.ttf"\/&gt;&lt;\/font&gt;
        &lt;font weight</code>"bold"&gt;&lt;font-data ttf<code class="literal">"verdanab.ttf"\/&gt;&lt;\/font&gt;
        &lt;font weight</code>"bold" style<code class="literal">"oblique"&gt;&lt;font-data ttf</code>"verdanaz.ttf"/&gt;&lt;/font&gt;
      &lt;/font-family&gt;

      &lt;font-family name<code class="literal">"Palatino" embed</code>"true" ligatures<code class="literal">"&amp;#xFB00; &amp;#xFB01; &amp;#xFB02; &amp;#xFB03; &amp;#xFB04;"&gt;
        &lt;font&gt;&lt;font-data ttf</code>"pala.ttf"/&gt;&lt;/font&gt;
        &lt;font style<code class="literal">"italic"&gt;&lt;font-data ttf</code>"palai.ttf"/&gt;&lt;/font&gt;
        &lt;font weight<code class="literal">"bold"&gt;&lt;font-data ttf</code>"palab.ttf"/&gt;&lt;/font&gt;
        &lt;font weight<code class="literal">"bold" style</code>"italic"&gt;&lt;font-data ttf<code class="literal">"palabi.ttf"\/&gt;&lt;\/font&gt;
      &lt;\/font-family&gt;
      
    &lt;font-family name</code>"Lucida Sans Unicode"&gt;
         &lt;font&gt;&lt;font-data ttf<code class="literal">"lsansuni.ttf"\/&gt;&lt;\/font&gt;
    &lt;\/font-family&gt;
      
    &lt;\/font-group&gt;
    
    &lt;!-- Required aliases --&gt;      
    &lt;font-alias name</code>"monospace" value<code class="literal">"Courier"\/&gt;
    &lt;font-alias name</code>"sans-serif" value<code class="literal">"Helvetica"\/&gt;
    &lt;font-alias name</code>"serif" value<code class="literal">"Times"\/&gt;    
    &lt;font-alias name</code>"cursive" value<code class="literal">"Times"\/&gt;
    &lt;font-alias name</code>"fantasy" value<code class="literal">"Times"\/&gt;
  &lt;\/fonts&gt;

  &lt;!-- =</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">= --&gt;
  &lt;!-- Language-specific data: hyphenation, line breaking, etc --&gt;
  &lt;!-- =</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">=</code><code class="literal">= --&gt;
  &lt;languages default-language</code>"en-US" xml:base<code class="literal">"hyphen\/"&gt;
  
    &lt;language name</code>"English (US)" codes<code class="literal">"none en-US eng-US"&gt;
      &lt;hyphenation pattern</code>"hyphen.tex"/&gt;
    &lt;/language&gt;

    &lt;language name<code class="literal">"English (UK)" codes</code>"en-GB eng-GB en eng"&gt;
      &lt;hyphenation pattern<code class="literal">"ukhyphen.tex"\/&gt;
    &lt;\/language&gt;

    &lt;language name</code>"Russian" codes<code class="literal">"ru rus"&gt;
      &lt;hyphenation pattern</code>"ruhyphal.tex" encoding<code class="literal">"koi8-r"\/&gt;
    &lt;\/language&gt;

    &lt;language name</code>"French" codes<code class="literal">"fr fra fre"&gt;
      &lt;hyphenation pattern</code>"frhyph_rx.tex"/&gt;
    &lt;/language&gt;
         
    &lt;language name<code class="literal">"German" codes</code>"de deu ger"&gt;
      &lt;hyphenation pattern<code class="literal">"dehyph_rx.tex"\/&gt;
    &lt;\/language&gt;

    &lt;language name</code>"Spanish" codes<code class="literal">"es esl spa"&gt;
      &lt;hyphenation pattern</code>"eshyph_rx.tex"/&gt;
    &lt;/language&gt;
    
    &lt;language name<code class="literal">"Polish" codes</code>"pl pol"&gt;
      &lt;hyphenation pattern="plhyph_rx.tex"/&gt;
    &lt;/language&gt;
    
  &lt;/languages&gt;
    
&lt;/config&gt;
</pre>
<p>
        XZ authored his equations using the venerable Latex, JM converted these to
        MathML using <a href="http://gentoo-wiki.com/HOWTO_Convert_LaTeX_to_HTML_with_MathML" target="_top">mxlatex</a>.
        This process is currently unreliable and required some manual intervention:
        consequently Latex source is not considered a viable route for the automatic
        production of SVG versions of equations.
      </p>
<p>
        Equations are embedded in the quickbook source using the <span class="emphasis"><em>equation</em></span>
        template defined in math.qbk. This outputs Docbook XML that looks like:
      </p>
<pre class="programlisting">&lt;inlinemediaobject&gt;
&lt;imageobject role<code class="literal">"html"&gt;
&lt;imagedata fileref</code>"../equations/myfile.png"&gt;&lt;/imagedata&gt;
&lt;/imageobject&gt;
&lt;imageobject role<code class="literal">"print"&gt;
&lt;imagedata fileref</code>"../equations/myfile.svg"&gt;&lt;/imagedata&gt;
&lt;/imageobject&gt;
&lt;/inlinemediaobject&gt;
</pre>
<p>
        MathML is not currently present in the Docbook output, or in the generated
        HTML: this needs further investigation.
      </p>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><small>Copyright  2006 -2007 John Maddock, Paul A. Bristow, Hubert Holin
      and Xiaogang Zhang</small></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="../backgrounders.html"><img src="../../../../../../../doc/html/images/prev.png" alt="Prev"></a><a accesskey="u" href="../backgrounders.html"><img src="../../../../../../../doc/html/images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../../../../../../doc/html/images/home.png" alt="Home"></a><a accesskey="n" href="relative_error.html"><img src="../../../../../../../doc/html/images/next.png" alt="Next"></a>
</div>
</body>
</html>
